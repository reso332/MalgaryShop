<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MalgrayShop</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        
        :root {
            --primary: #2E7D32;
            --primary-dark: #1B5E20;
            --secondary: #F5F5F5;
            --accent: #FF9800;
            --accent-dark: #F57C00;
            --text: #333;
            --text-light: #666;
            --danger: #D32F2F;
            --danger-dark: #C62828;
            --white: #FFFFFF;
            --gray: #E0E0E0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 15px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„ØµÙØ­Ø© */
        header {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 20px 25px;
            border-radius: var(--radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 28px;
            font-weight: 700;
        }
        
        .logo i {
            font-size: 32px;
        }
        
        .user-info {
            text-align: left;
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 20px;
            border-radius: 10px;
            min-width: 250px;
        }
        
        .user-info h3 {
            margin-bottom: 8px;
            font-size: 20px;
        }
        
        .user-info p {
            font-size: 14px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .balance {
            background: var(--accent);
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        /* Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        .auth-section {
            background: var(--white);
            padding: 35px;
            border-radius: var(--radius);
            margin: 50px auto;
            box-shadow: var(--shadow);
            max-width: 500px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .auth-form {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .auth-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text);
            font-size: 16px;
        }
        
        .input-with-icon {
            position: relative;
        }
        
        .input-with-icon i {
            position: absolute;
            /* ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ù„ÙŠØ³Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            right: 15px; 
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 18px;
        }
        
        input {
            width: 100%;
            /* ØªÙ… Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„ØªØ¨Ø¹Ø¯ Ø§Ù„Ù†Øµ Ø¹Ù† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            padding: 15px 50px 15px 20px; 
            border: 2px solid var(--gray);
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            background: var(--secondary);
            text-align: right; /* Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„Ù†Øµ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯ */
        }
        
        input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.2);
            background: var(--white);
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn i {
            font-size: 18px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: var(--white);
            width: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(46, 125, 50, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(to right, var(--accent), var(--accent-dark));
            color: var(--white);
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 152, 0, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(to right, var(--danger), var(--danger-dark));
            color: var(--white);
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(211, 47, 47, 0.3);
        }
        
        .btn-small {
            padding: 10px 18px;
            font-size: 15px;
        }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .products-section {
            background: var(--white);
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--secondary);
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .section-title {
            font-size: 26px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .product-card {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            border: 1px solid var(--gray);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }
        
        .product-header {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 25px;
        }
        
        .product-name {
            font-size: 22px;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .product-price {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .product-body {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .seller-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 18px;
            border-bottom: 2px dashed var(--gray);
        }
        
        .seller-details {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .seller-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(to right, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        
        .seller-name {
            font-weight: 700;
            font-size: 17px;
        }
        
        .seller-id {
            font-size: 13px;
            color: var(--text-light);
        }
        
        .product-stock {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 20px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(46, 125, 50, 0.1);
            border-radius: 8px;
        }
        
        .product-stock.out-of-stock {
            color: var(--danger);
            background: rgba(211, 47, 47, 0.1);
        }
        
        .product-actions {
            margin-top: auto;
            display: flex;
            gap: 12px;
        }
        
        .manage-products {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(to right, #E8F5E9, #C8E6C9);
            border-radius: var(--radius);
            border: 2px dashed var(--primary);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 18px 30px;
            border-radius: 10px;
            color: var(--white);
            font-weight: 600;
            z-index: 1000;
            animation: slideIn 0.3s ease;
            display: none; /* Ø¥Ø®ÙØ§Ø¡ Ù…Ø¨Ø¯Ø¦ÙŠÙ‹Ø§ */
            align-items: center;
            gap: 15px;
            max-width: 400px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        
        .notification.success {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
        }
        
        .notification.error {
            background: linear-gradient(to right, var(--danger), var(--danger-dark));
        }
        
        .notification.info {
            background: linear-gradient(to right, #2196F3, #0D47A1);
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´Ø±Ø§Ø¡ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(3px);
        }
        
        .modal {
            background: var(--white);
            padding: 35px;
            border-radius: var(--radius);
            max-width: 500px;
            width: 90%;
            animation: modalFadeIn 0.3s ease;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .modal h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .modal p {
            margin-bottom: 15px;
            font-size: 16px;
            padding: 10px 0;
            border-bottom: 1px solid var(--gray);
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 18px;
            margin-top: 30px;
        }
        
        /* Ù…Ù†ØªØ¬Ø§ØªÙŠ */
        .my-products-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }
        
        .my-product-card {
            background: var(--white);
            padding: 22px;
            border-radius: var(--radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-left: 5px solid var(--accent);
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 992px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                text-align: center;
            }
            
            .user-info {
                text-align: center;
                min-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .products-grid, .my-products-list {
                grid-template-columns: 1fr;
            }
            
            .auth-section {
                padding: 25px 20px;
                margin: 30px auto;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .btn-small {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .auth-section, .products-section, .manage-products {
                padding: 20px 15px;
            }
            
            .modal {
                padding: 25px 20px;
            }
            
            .btn {
                padding: 13px 20px;
                font-size: 16px;
            }
        }
        
        /* ØªØ­Ù…ÙŠÙ„ */
        .loader {
            display: flex; /* Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¨Ø¯Ø¦ÙŠÙ‹Ø§ Ø­ØªÙ‰ Ù†Ù‡Ø§ÙŠØ© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
        }
        
        .loader-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid var(--gray);
            border-top: 6px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: var(--text-light);
            font-size: 14px;
            border-top: 1px solid var(--gray);
        }
        
        /* ÙØ¦Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .category-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            padding: 10px 20px;
            background: var(--secondary);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .category-btn.active {
            background: var(--primary);
            color: var(--white);
        }
        
        .category-btn:hover:not(.active) {
            background: var(--gray);
        }
        
        /* Ø±Ø³Ø§Ù„Ø© ÙØ§Ø±ØºØ© */
        .empty-message {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
            grid-column: 1 / -1;
        }
        
        .empty-message i {
            font-size: 50px;
            margin-bottom: 20px;
            color: var(--gray);
        }
    </style>
</head>
<body>
    <div id="loader" class="loader">
        <div class="loader-spinner"></div>
        <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
    </div>
    
    <div class="container">
        <div id="authSection" class="auth-section" style="display: none;">
            <div class="auth-form">
                <h2><i class="fas fa-store"></i> Cash App Ø§Ù„Ù…ØªØ¬Ø±</h2>
                <div class="form-group">
                    <label for="userId"><i class="fas fa-user"></i> Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (ID)</label>
                    <div class="input-with-icon">
                        <i class="fas fa-id-card"></i>
                        <input type="text" id="userId" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ" autocomplete="username">
                    </div>
                </div>
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <div class="input-with-icon">
                        <i class="fas fa-key"></i>
                        <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" autocomplete="current-password">
                    </div>
                </div>
                <button id="loginBtn" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </button>
                <p id="loginError" style="color: var(--danger); margin-top: 15px; text-align: center; display: none;">
                    <i class="fas fa-exclamation-circle"></i> Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©
                </p>
            </div>
        </div>
        
        <div id="dashboard" style="display: none;">
            <header>
                <div class="logo">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Cash App Ø§Ù„Ù…ØªØ¬Ø±</span>
                </div>
                <div class="user-info">
                    <h3 id="userName"><i class="fas fa-user-circle"></i> Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
                    <p><i class="fas fa-id-badge"></i> Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: <span id="displayUserId">---</span></p>
                    <p><i class="fas fa-calendar-alt"></i> Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„: <span id="lastLogin">---</span></p>
                </div>
                <div class="balance">
                    <i class="fas fa-coins"></i>
                    <span>Ø§Ù„Ø±ØµÙŠØ¯: <span id="userBalance">0.00</span> Ø¯ÙˆÙ„Ø§Ø±</span>
                </div>
            </header>
            
            <div class="manage-products">
                <h3 style="margin-bottom: 25px; color: var(--primary); display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-box-open"></i> Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†ØªØ¬Ø§ØªÙŠ
                </h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="productName"><i class="fas fa-tag"></i> Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                        <input type="text" id="productName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
                    </div>
                    <div class="form-group">
                        <label for="productPrice"><i class="fas fa-dollar-sign"></i> Ø§Ù„Ø³Ø¹Ø±</label>
                        <input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="productStock"><i class="fas fa-boxes"></i> Ø§Ù„ÙƒÙ…ÙŠØ©</label>
                        <input type="number" id="productStock" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©" min="1" value="1">
                    </div>
                </div>
                <button id="addProductBtn" class="btn btn-secondary">
                    <i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                </button>
                <div id="myProductsList" class="my-products-list" style="margin-top: 30px;"></div>
            </div>
            
            <section class="products-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-shopping-bag"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„Ø´Ø±Ø§Ø¡
                    </h2>
                    <button id="logoutBtn" class="btn btn-danger">
                        <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                    </button>
                </div>
                <div id="productsList" class="products-grid"></div>
            </section>
            
            <footer>
                <p><i class="fas fa-code"></i> ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase Realtime Database</p>
                <p>Â© 2025 Cash App - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            </footer>
        </div>
        
        <div id="purchaseModal" class="modal-overlay">
            <div class="modal">
                <h3><i class="fas fa-shopping-cart"></i> ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡</h3>
                <p>Ø§Ù„Ù…Ù†ØªØ¬: <strong id="modalProductName"></strong></p>
                <p>Ø§Ù„Ø³Ø¹Ø±: <strong id="modalProductPrice"></strong> Ø¯ÙˆÙ„Ø§Ø±</p>
                <p>Ø§Ù„Ø¨Ø§Ø¦Ø¹: <strong id="modalSellerName"></strong> (ID: <span id="modalSellerId"></span>)</p>
                <p>Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <strong id="modalUserBalance"></strong> Ø¯ÙˆÙ„Ø§Ø±</p>
                <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡: <strong id="modalBalanceAfter"></strong> Ø¯ÙˆÙ„Ø§Ø±</p>
                <div class="modal-buttons">
                    <button id="confirmPurchaseBtn" class="btn btn-primary">
                        <i class="fas fa-check-circle"></i> Ù†Ø¹Ù…ØŒ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´Ø±Ø§Ø¡
                    </button>
                    <button id="cancelPurchaseBtn" class="btn">
                        <i class="fas fa-times-circle"></i> Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </div>
        </div>
        
        <div id="notification" class="notification"></div>
    </div>
    
    <script type="module">
        // ğŸš¨ ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¥Ù„Ù‰ Ø§Ù„Ø¥ØµØ¯Ø§Ø± 12.6.0 ÙˆØ¥Ø¶Ø§ÙØ© firebase-database.js
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getDatabase, ref, set, get, update, remove, push, onValue, query, orderByChild } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";
        
        // âš ï¸ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ù„ØªØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§
        const firebaseConfig = {
            apiKey: "AIzaSyAKGrxv_GT3T3krYeYY5C-o7VmvLkG-gw0",
            authDomain: "cashapp-405b7.firebaseapp.com",
            databaseURL: "https://cashapp-405b7-default-rtdb.firebaseio.com", // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ URL Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡
            projectId: "cashapp-405b7",
            storageBucket: "cashapp-405b7.firebasestorage.app",
            messagingSenderId: "146496743526",
            appId: "1:146496743526:web:edc0318c7f3affa25465a7",
            measurementId: "G-NWMR38V1B9"
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        
        // Ø¹Ù†Ø§ØµØ± DOM
        const authSection = document.getElementById('authSection');
        const dashboard = document.getElementById('dashboard');
        const loginBtn = document.getElementById('loginBtn');
        const loginError = document.getElementById('loginError');
        const logoutBtn = document.getElementById('logoutBtn');
        const userIdInput = document.getElementById('userId');
        const passwordInput = document.getElementById('password');
        const userNameElement = document.getElementById('userName');
        const displayUserIdElement = document.getElementById('displayUserId');
        const userBalanceElement = document.getElementById('userBalance');
        const lastLoginElement = document.getElementById('lastLogin');
        const productsList = document.getElementById('productsList');
        const myProductsList = document.getElementById('myProductsList');
        const productNameInput = document.getElementById('productName');
        const productPriceInput = document.getElementById('productPrice');
        const productStockInput = document.getElementById('productStock');
        const addProductBtn = document.getElementById('addProductBtn');
        const purchaseModal = document.getElementById('purchaseModal');
        const modalProductName = document.getElementById('modalProductName');
        const modalProductPrice = document.getElementById('modalProductPrice');
        const modalSellerName = document.getElementById('modalSellerName');
        const modalSellerId = document.getElementById('modalSellerId');
        const modalUserBalance = document.getElementById('modalUserBalance');
        const modalBalanceAfter = document.getElementById('modalBalanceAfter');
        const confirmPurchaseBtn = document.getElementById('confirmPurchaseBtn');
        const cancelPurchaseBtn = document.getElementById('cancelPurchaseBtn');
        const notification = document.getElementById('notification');
        const loader = document.getElementById('loader');
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let currentUser = null;
        let selectedProduct = null;
        let userBalanceListener = null; // Ù…ØªØºÙŠØ± Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø§Ù„Ù„Ø­Ø¸ÙŠ Ù„Ù„Ø±ØµÙŠØ¯
        
        // Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        const LOCAL_STORAGE_USER_ID = 'currentUserId';
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ==========
        
        /**
         * Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù….
         * @param {string} userId - Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….
         * @param {Object} userData - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.
         */
        async function completeLogin(userId, userData) {
             currentUser = userData;
             currentUser.id = userId; // ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ ID Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ø¦Ù†
             
             // ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„
             const userRef = ref(database, 'users/' + userId);
             await update(userRef, {
                 lastLogin: new Date().toISOString()
             });
             
             currentUser.lastLogin = new Date().toISOString();
             
             localStorage.setItem(LOCAL_STORAGE_USER_ID, userId); // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù€ ID ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
             
             showNotification(`Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ${currentUser.name}!`, 'success');
             switchToDashboard();
             loadProducts();
             loadMyProducts();
             listenToUserBalance(userId); // Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±ØµÙŠØ¯
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        loginBtn.addEventListener('click', async () => {
            const userId = userIdInput.value.trim();
            const password = passwordInput.value;
            
            if (!userId || !password) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }
            
            showLoader('Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...');
            loginError.style.display = 'none';
            
            try {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const userRef = ref(database, 'users/' + userId);
                const snapshot = await get(userRef);
                
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                    if (userData.password === password) {
                        await completeLogin(userId, userData);
                    } else {
                        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…ÙˆØ­Ø¯Ø©
                        loginError.textContent = 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                        loginError.style.display = 'block';
                        showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                    }
                } else {
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…ÙˆØ­Ø¯Ø©
                    loginError.textContent = 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                    loginError.style.display = 'block';
                    showNotification('Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„/Ø§Ù„Ø§ØªØµØ§Ù„:', error);
                // Ø±Ø³Ø§Ù„Ø© Ù…ÙˆØ­Ø¯Ø© Ù„Ù„Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„/Ø§Ù„ØªØ­Ù‚Ù‚
                loginError.textContent = 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©'; 
                loginError.style.display = 'block';
                showNotification('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.', 'error');
            } finally {
                hideLoader();
            }
        });
        
        // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
        passwordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loginBtn.click();
            }
        });
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        logoutBtn.addEventListener('click', () => {
            if (userBalanceListener) {
                userBalanceListener(); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±ØµÙŠØ¯
                userBalanceListener = null;
            }
            currentUser = null;
            localStorage.removeItem(LOCAL_STORAGE_USER_ID);
            switchToAuth();
            showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        });

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø§Ù„Ù„Ø­Ø¸ÙŠ Ù„ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function listenToUserBalance(userId) {
            if (userBalanceListener) {
                userBalanceListener(); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¥Ø°Ø§ ÙˆØ¬Ø¯
            }

            const userMoneyRef = ref(database, 'users/' + userId + '/money');

            // onValue ØªØ±Ø¬Ø¹ Ø¯Ø§Ù„Ø© Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
            userBalanceListener = onValue(userMoneyRef, (snapshot) => {
                const newBalance = snapshot.val();
                if (currentUser && newBalance !== null) {
                    currentUser.money = newBalance;
                    userBalanceElement.textContent = newBalance.toFixed(2);
                    modalUserBalance.textContent = newBalance.toFixed(2); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø£ÙŠØ¶Ø§Ù‹
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØªÙˆØ­Ø§Ù‹
                    if(purchaseModal.style.display === 'flex' && selectedProduct) {
                         modalBalanceAfter.textContent = (newBalance - selectedProduct.price).toFixed(2);
                    }
                }
            }, (error) => {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù„Ø­Ø¸ÙŠ', 'error');
            });
        }
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        async function attemptAutoLogin() {
            const userId = localStorage.getItem(LOCAL_STORAGE_USER_ID);
            
            if (!userId) {
                switchToAuth();
                hideLoader(); // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„
                return;
            }

            showLoader('Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...');
            
            try {
                const userRef = ref(database, 'users/' + userId);
                const snapshot = await get(userRef);
                
                if (snapshot.exists()) {
                    await completeLogin(userId, snapshot.val());
                    // Ù„Ø§ Ù†Ø¸Ù‡Ø± Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­ Ù‡Ù†Ø§ Ù„Ø£Ù†Ù‡ Ù„ÙŠØ³ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙØ¹Ù„ÙŠ Ø¬Ø¯ÙŠØ¯
                } else {
                    // Ù„Ù… ÙŠØ¹Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                    localStorage.removeItem(LOCAL_STORAGE_USER_ID);
                    switchToAuth();
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ:', error);
                localStorage.removeItem(LOCAL_STORAGE_USER_ID);
                switchToAuth();
                showNotification('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙŠØ¯ÙˆÙŠØ§Ù‹.', 'error');
            } finally {
                hideLoader();
            }
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ==========
        
        // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function switchToDashboard() {
            authSection.style.display = 'none';
            dashboard.style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            userNameElement.textContent = currentUser.name;
            displayUserIdElement.textContent = currentUser.id;
            userBalanceElement.textContent = (currentUser.money || 0).toFixed(2);
            
            // ØªÙ†Ø³ÙŠÙ‚ ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„
            if (currentUser.lastLogin) {
                const lastLoginDate = new Date(currentUser.lastLogin);
                lastLoginElement.textContent = lastLoginDate.toLocaleDateString('ar-SA') + 
                    ' ' + lastLoginDate.toLocaleTimeString('ar-SA');
            }
        }
        
        // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
        function switchToAuth() {
            authSection.style.display = 'block';
            dashboard.style.display = 'none';
            userIdInput.value = '';
            passwordInput.value = '';
            loginError.style.display = 'none';
            userIdInput.focus();
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==========
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
        addProductBtn.addEventListener('click', async () => {
            if (!currentUser) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            const name = productNameInput.value.trim();
            const price = parseFloat(productPriceInput.value);
            const stock = parseInt(productStockInput.value);
            
            if (!name) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬', 'error');
                productNameInput.focus();
                return;
            }
            
            if (!price || price <= 0) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ­ÙŠØ­', 'error');
                productPriceInput.focus();
                return;
            }
            
            if (!stock || stock < 1) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ…ÙŠØ© ØµØ­ÙŠØ­Ø©', 'error');
                productStockInput.focus();
                return;
            }
            
            showLoader('Ø¬Ø§Ø±ÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬...');
            
            try {
                // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ù†ØªØ¬
                const productRef = push(ref(database, 'products'));
                const productId = productRef.key;
                
                const productData = {
                    id: productId,
                    name: name,
                    price: price,
                    stock: stock,
                    sellerId: currentUser.id,
                    sellerName: currentUser.name,
                    createdAt: new Date().toISOString()
                };
                
                await set(productRef, productData);
                
                // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
                productNameInput.value = '';
                productPriceInput.value = '';
                productStockInput.value = '1';
                
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬', 'error');
            } finally {
                hideLoader();
                productNameInput.focus();
            }
        });
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„Ø´Ø±Ø§Ø¡ (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø§Ù„Ù„Ø­Ø¸ÙŠ)
        function loadProducts() {
            const productsRef = ref(database, 'products');
            const productsQuery = query(productsRef, orderByChild('createdAt'));
            
            onValue(productsQuery, (snapshot) => {
                productsList.innerHTML = '';
                
                if (!snapshot.exists()) {
                    productsList.innerHTML = `
                        <div class="empty-message">
                            <i class="fas fa-box-open"></i>
                            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                            <p>ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠØ¶ÙŠÙ Ù…Ù†ØªØ¬Ø§Ù‹!</p>
                        </div>
                    `;
                    return;
                }
                
                const products = snapshot.val();
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒØ§Ø¦Ù† Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© Ù„Ù„ÙØ±Ø² ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
                const productsArray = Object.keys(products).map(key => ({ 
                    id: key, 
                    ...products[key] 
                })).reverse(); 

                productsArray.forEach(product => {
                    createProductCard(product, product.id);
                });
            }, (error) => {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 'error');
            });
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø§Ù„Ù„Ø­Ø¸ÙŠ)
        function loadMyProducts() {
            if (!currentUser) return;
            
            const productsRef = ref(database, 'products');
            const productsQuery = query(productsRef, orderByChild('createdAt'));
            
            onValue(productsQuery, (snapshot) => {
                myProductsList.innerHTML = '';
                let hasMyProducts = false;
                
                if (snapshot.exists()) {
                    const products = snapshot.val();
                    
                    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒØ§Ø¦Ù† Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© Ù„Ù„ÙØ±Ø² ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
                    const productsArray = Object.keys(products).map(key => ({ 
                        id: key, 
                        ...products[key] 
                    })).reverse();
                    
                    productsArray.forEach(product => {
                        if (product.sellerId === currentUser.id) {
                            hasMyProducts = true;
                            createMyProductCard(product, product.id);
                        }
                    });
                }
                
                if (!hasMyProducts) {
                    myProductsList.innerHTML = `
                        <div class="empty-message">
                            <i class="fas fa-boxes"></i>
                            <h3>Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯</h3>
                            <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ùƒ Ø§Ù„Ø£ÙˆÙ„!</p>
                        </div>
                    `;
                }
            }, (error) => {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§ØªÙŠ:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§ØªÙŠ', 'error');
            });
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù…Ù†ØªØ¬ Ù„Ù„Ø¹Ø±Ø¶
        function createProductCard(product, productId) {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            
            const isOutOfStock = product.stock <= 0;
            // ÙŠØ¬Ø¨ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ currentUser Ù„Ø£Ù†Ù‡ Ù‚Ø¯ ÙŠØªÙ… ØªØ´ØºÙŠÙ„ loadProducts Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
            const canBuy = currentUser && !isOutOfStock && currentUser.id !== product.sellerId; 
            const isMyProduct = currentUser && currentUser.id === product.sellerId;
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø¦Ø¹
            const sellerInitial = product.sellerName ? product.sellerName.charAt(0) : '?';
            
            productCard.innerHTML = `
                <div class="product-header">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">
                        <i class="fas fa-dollar-sign"></i> ${product.price.toFixed(2)}
                    </div>
                </div>
                <div class="product-body">
                    <div class="seller-info">
                        <div class="seller-details">
                            <div class="seller-avatar">${sellerInitial}</div>
                            <div>
                                <div class="seller-name">${product.sellerName || 'Ø¨Ø§Ø¦Ø¹'}</div>
                                <div class="seller-id">ID: ${product.sellerId}</div>
                            </div>
                        </div>
                    </div>
                    <div class="product-stock ${isOutOfStock ? 'out-of-stock' : ''}">
                        <i class="fas ${isOutOfStock ? 'fa-times-circle' : 'fa-check-circle'}"></i>
                        ${isOutOfStock ? 'Ù†ÙØ°Øª Ø§Ù„ÙƒÙ…ÙŠØ©' : `Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©: ${product.stock}`}
                    </div>
                    <div class="product-actions">
                        ${canBuy ? 
                            `<button class="btn btn-primary btn-small" onclick="preparePurchase('${productId}')">
                                <i class="fas fa-shopping-cart"></i> Ø´Ø±Ø§Ø¡
                            </button>` : 
                            isMyProduct ?
                            `<button class="btn btn-secondary btn-small" disabled>
                                <i class="fas fa-user"></i> Ù…Ù†ØªØ¬ÙŠ
                            </button>` :
                            isOutOfStock ? 
                            `<button class="btn btn-small" disabled>
                                <i class="fas fa-ban"></i> Ù†ÙØ°Øª Ø§Ù„ÙƒÙ…ÙŠØ©
                            </button>` : 
                            `<button class="btn btn-small" disabled>
                                <i class="fas fa-info-circle"></i> ØºÙŠØ± Ù…ØªØ§Ø­
                            </button>`
                        }
                    </div>
                </div>
            `;
            
            productsList.appendChild(productCard);
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¥Ø¯Ø§Ø±ØªÙ‡
        function createMyProductCard(product, productId) {
            const productCard = document.createElement('div');
            productCard.className = 'my-product-card';
            
            const createdAt = new Date(product.createdAt);
            const formattedDate = createdAt.toLocaleDateString('ar-SA');
            
            productCard.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                    <div style="flex: 1;">
                        <h4 style="margin-bottom: 8px; color: var(--primary); font-size: 18px;">
                            <i class="fas fa-cube"></i> ${product.name}
                        </h4>
                        <div style="display: flex; gap: 20px; margin-bottom: 10px; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <i class="fas fa-dollar-sign" style="color: var(--accent);"></i>
                                <strong>${product.price.toFixed(2)} Ø¯ÙˆÙ„Ø§Ø±</strong>
                            </div>
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <i class="fas fa-box" style="color: var(--primary);"></i>
                                <strong>${product.stock} ÙˆØ­Ø¯Ø©</strong>
                            </div>
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <i class="fas fa-calendar" style="color: var(--text-light);"></i>
                                <span style="font-size: 13px;">${formattedDate}</span>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-primary btn-small" onclick="editProduct('${productId}', ${product.price}, ${product.stock})">
                            <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                        </button>
                        <button class="btn btn-danger btn-small" onclick="deleteProduct('${productId}')">
                            <i class="fas fa-trash"></i> Ø­Ø°Ù
                        </button>
                    </div>
                </div>
            `;
            
            myProductsList.appendChild(productCard);
        }
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡ ==========
        
        // Ø§Ù„ØªØ­Ø¶ÙŠØ± Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡
        window.preparePurchase = async function(productId) {
            if (!currentUser) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            showLoader('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù…Ù†ØªØ¬...');
            
            try {
                const productRef = ref(database, 'products/' + productId);
                const snapshot = await get(productRef);
                
                if (snapshot.exists()) {
                    selectedProduct = {
                        id: productId,
                        ...snapshot.val()
                    };
                    
                    // ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    const buyerRef = ref(database, 'users/' + currentUser.id);
                    const buyerSnapshot = await get(buyerRef);
                    const currentBalance = buyerSnapshot.val().money;
                    
                    if (selectedProduct.stock <= 0) {
                        showNotification('Ù†ÙØ°Øª ÙƒÙ…ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬', 'error');
                        return;
                    }
                    
                    if (currentUser.id === selectedProduct.sellerId) {
                        showNotification('Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø§Ø¡ Ù…Ù†ØªØ¬Ùƒ Ø§Ù„Ø®Ø§Øµ', 'error');
                        return;
                    }
                    
                    if (currentBalance < selectedProduct.price) {
                        showNotification('Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ Ù„Ù„Ø´Ø±Ø§Ø¡', 'error');
                        return;
                    }
                    
                    // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯
                    modalProductName.textContent = selectedProduct.name;
                    modalProductPrice.textContent = selectedProduct.price.toFixed(2);
                    modalSellerName.textContent = selectedProduct.sellerName;
                    modalSellerId.textContent = selectedProduct.sellerId;
                    modalUserBalance.textContent = currentBalance.toFixed(2);
                    modalBalanceAfter.textContent = (currentBalance - selectedProduct.price).toFixed(2);
                    purchaseModal.style.display = 'flex';
                } else {
                    showNotification('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡', 'error');
            } finally {
                hideLoader();
            }
        };
        
        // ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡
        confirmPurchaseBtn.addEventListener('click', async () => {
            if (!selectedProduct || !currentUser) return;
            
            showLoader('Ø¬Ø§Ø±ÙŠ Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡...');
            
            try {
                // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ø§ ÙŠØ²Ø§Ù„ Ù…ØªØ§Ø­Ø§Ù‹
                const productRef = ref(database, 'products/' + selectedProduct.id);
                const productSnapshot = await get(productRef);
                
                if (!productSnapshot.exists() || productSnapshot.val().stock <= 0) {
                    showNotification('Ù†ÙØ°Øª ÙƒÙ…ÙŠØ© Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬', 'error');
                    purchaseModal.style.display = 'none';
                    return;
                }
                
                // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ù„Ø¯ÙŠÙ‡ Ø±ØµÙŠØ¯ ÙƒØ§ÙÙ (Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ù„ØªØ£ÙƒØ¯)
                const buyerRef = ref(database, 'users/' + currentUser.id);
                const buyerSnapshot = await get(buyerRef);
                const currentBuyerMoney = buyerSnapshot.val().money;
                
                if (!buyerSnapshot.exists() || currentBuyerMoney < selectedProduct.price) {
                    showNotification('Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ. ØªÙ… ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯Ùƒ.', 'error');
                    purchaseModal.style.display = 'none';
                    return;
                }
                
                // 3. ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ (Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙ†Ø§Ø³Ù‚ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬)
                
                // Ø£) Ø®ØµÙ… Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø´ØªØ±ÙŠ
                const newBuyerBalance = currentBuyerMoney - selectedProduct.price;
                await update(buyerRef, { money: newBuyerBalance });
                
                // Ø¨) Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ù„Øº Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ø¨Ø§Ø¦Ø¹
                const sellerRef = ref(database, 'users/' + selectedProduct.sellerId);
                const sellerSnapshot = await get(sellerRef);
                const newSellerBalance = (sellerSnapshot.val().money || 0) + selectedProduct.price;
                await update(sellerRef, { money: newSellerBalance });
                
                // Ø¬) ØªÙ‚Ù„ÙŠÙ„ ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬
                const newStock = productSnapshot.val().stock - 1;
                await update(productRef, { stock: newStock });
                
                // Ø¯) ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡
                const purchaseRef = push(ref(database, 'purchases'));
                await set(purchaseRef, {
                    productId: selectedProduct.id,
                    productName: selectedProduct.name,
                    buyerId: currentUser.id,
                    buyerName: currentUser.name,
                    sellerId: selectedProduct.sellerId,
                    sellerName: selectedProduct.sellerName,
                    price: selectedProduct.price,
                    date: new Date().toISOString()
                });
                
                // 4. ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø¹Ø¨Ø± Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ù„Ø­Ø¸ÙŠ)
                currentUser.money = newBuyerBalance;
                
                showNotification('ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                purchaseModal.style.display = 'none';
                selectedProduct = null;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡', 'error');
            } finally {
                hideLoader();
            }
        });
        
        // Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡
        cancelPurchaseBtn.addEventListener('click', () => {
            purchaseModal.style.display = 'none';
            selectedProduct = null;
        });
        
        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Ø§Ù„Ø¨Ø§Ø¦Ø¹) ==========
        
        // ØªØ¹Ø¯ÙŠÙ„ Ø³Ø¹Ø± Ø£Ùˆ ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬
        window.editProduct = function(productId, currentPrice, currentStock) {
            const newPriceInput = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ù†ØªØ¬:', currentPrice);
            if (newPriceInput === null) return;
            
            const price = parseFloat(newPriceInput);
            if (isNaN(price) || price < 0) {
                showNotification('Ø§Ù„Ø³Ø¹Ø± ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
                return;
            }
            
            const newStockInput = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ù†ØªØ¬:', currentStock);
            if (newStockInput === null) return;
            
            const stock = parseInt(newStockInput);
            if (isNaN(stock) || stock < 0) {
                showNotification('Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                return;
            }
            
            showLoader('Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬...');
            
            const productRef = ref(database, 'products/' + productId);
            
            update(productRef, {
                price: price,
                stock: stock
            }).then(() => {
                showNotification('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }).catch((error) => {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬', 'error');
            }).finally(() => {
                hideLoader();
            });
        };
        
        // Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬
        window.deleteProduct = function(productId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) {
                return;
            }
            
            showLoader('Ø¬Ø§Ø±ÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬...');
            
            const productRef = ref(database, 'products/' + productId);
            
            remove(productRef).then(() => {
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }).catch((error) => {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'error');
            }).finally(() => {
                hideLoader();
            });
        };
        
        // ========== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ==========
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type) {
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            notification.className = `notification ${type}`;
            notification.style.display = 'flex';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 4000);
        }
        
        // Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function showLoader(message = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...') {
            document.querySelector('#loader p').textContent = message;
            loader.style.display = 'flex';
        }
        
        function hideLoader() {
            loader.style.display = 'none';
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', () => {
             // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù„ÙˆØ¯Ø± Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
             showLoader('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...');
             
             // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø£Ùˆ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
             attemptAutoLogin();
        });
    </script>
</body>
</html>
